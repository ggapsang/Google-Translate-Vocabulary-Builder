# Stage 5-6 수동 테스트 가이드

## 사전 준비
- Chrome 최신 버전
- 확장 프로그램 재로드 완료 (`chrome://extensions` > 새로고침)
- `translate.google.com` 접속
- 최소 2~3개 이상의 단어가 저장된 상태 (Stage 3-4에서 저장한 단어 활용)
  - 단어가 없다면 `hello`, `run`, `beautiful` 등을 영어→한국어로 검색 후 저장

---

## Test 1: Side Panel 초기화 확인

### 목적
- Stage 5-6 코드가 정상 로드되고, 상태 관리 및 필터 드롭다운이 초기화되는지 확인

### 절차
1. `translate.google.com`에서 사이드 패널 열기
2. 사이드 패널 상단 드롭다운에서 **"Google Translate Vocabulary Builder"** 선택
3. DevTools Console (사이드 패널 우클릭 > 검사) 확인

### 확인 사항
- [x] `[VocabBuilder] Side panel loaded (Stage 5-6)` 출력
- [x] "나의 단어장" 헤더, 검색바, 탭(통계/단어장/테스트) 정상 표시
- [x] 통계 탭에서 총 단어 수가 저장된 단어 개수와 일치
- [x] 콘솔에 오류 없음

---

## Test 2: 단어 목록 렌더링 확인

### 목적
- 단어장 탭에서 저장된 단어들이 카드 형태로 정상 표시되는지 확인

### 절차
1. **"단어장"** 탭 클릭
2. 단어 카드 목록 확인

### 확인 사항
- [x] 상단에 "N개 단어" 표시 (저장된 단어 수와 일치)
- [x] 각 카드에 단어명, 품사, 한국어 뜻, 문맥 일부, 저장 시간, 복습 횟수 표시
- [x] 도구바(필터/정렬/내보내기 버튼) 표시
- [x] 다른 탭으로 전환 시 도구바 숨김

---

## Test 3: 검색 기능 확인

### 목적
- 검색바에서 단어/뜻으로 실시간 필터링이 작동하는지 확인

### 절차
1. **"단어장"** 탭으로 이동
2. 검색바에 저장된 단어의 일부 (예: `hel`) 입력
3. 300ms 후 결과 확인
4. 한국어 뜻으로 검색 (예: `안녕`) 시도
5. 검색어 전부 삭제

### 확인 사항
- [x] 입력 후 약 300ms 뒤에 목록이 필터링됨 (디바운스 동작)
- [x] 영어 단어로 검색 시 해당 단어만 표시
- [x] 한국어 뜻으로 검색 시 해당 단어 표시
- [x] 상단에 "N개 / 전체M개" 형식으로 필터링 결과 수 표시
- [x] 검색어 삭제 시 전체 목록 복원
- [x] 검색 결과 없을 때 "검색 결과가 없습니다." 표시

### 추가 확인
- [x] 통계 탭에서 검색어 입력 시 자동으로 단어장 탭으로 전환

---

## Test 4: 필터 드롭다운 확인

### 목적
- 언어쌍/품사 필터가 정상 동작하는지 확인

### 절차
1. **"단어장"** 탭에서 **"필터"** 버튼 클릭
2. 드롭다운 메뉴 확인 (언어 섹션 + 품사 섹션)
3. 특정 언어쌍 선택 (예: `en → ko`)
4. 특정 품사 선택 (예: `동사` 또는 저장된 단어의 품사)
5. "전체 언어" / "전체 품사"로 복원
6. 드롭다운 바깥 영역 클릭

### 확인 사항
- [x] 드롭다운에 "언어" / "품사" 두 섹션이 구분자로 나뉨
- [x] 실제 저장된 데이터의 언어쌍/품사만 동적으로 표시
- [x] 언어쌍 선택 시 해당 언어쌍 단어만 표시
- [x] 품사 선택 시 해당 품사 단어만 표시
- [x] 필터 활성 시 "필터 (N)" 형식으로 버튼 텍스트 변경
- [x] 필터 해제 시 버튼 텍스트 "필터"로 복원
- [x] 바깥 클릭 시 드롭다운 닫힘

---

## Test 5: 정렬 드롭다운 확인

### 목적
- 4가지 정렬 옵션이 정상 동작하는지 확인

### 절차
1. **"정렬"** 버튼 클릭
2. 순서대로 "가나다순" → "저장일 오래된 순" → "복습 필요 순" → "최신순" 선택
3. 각 선택 후 목록 순서 변경 확인

### 확인 사항
- [x] **최신순**: 최근 저장된 단어가 위에 표시
- [x] **가나다순**: 알파벳 순서 (A→Z 또는 가→하)
- [x] **저장일 오래된 순**: 오래된 단어가 위에 표시
- [-] **복습 필요 순**: 숙련도 낮은 단어가 우선 (현재 모든 단어 masteryLevel=0이므로 검증 불가 → Stage 11-12 이후 테스트)
- [x] 선택된 옵션에 파란색 활성 표시

---

## Test 6: 단어 상세 뷰 진입 및 표시

### 목적
- 단어 카드 클릭 시 상세 뷰가 열리고 모든 정보가 표시되는지 확인

### 절차
1. 단어 카드 클릭
2. 상세 뷰 내용 확인
3. 하단까지 스크롤하여 모든 섹션 확인

### 확인 사항
- [x] "← 뒤로" 버튼 + 삭제(🗑️) 버튼 표시
- [x] 단어명 큰 글씨로 표시
- [x] 품사 + 한국어 뜻 목록 (번호 매겨짐)
- [x] 영어 정의 (이탤릭체, 있을 경우)
- [x] 유의어 칩 형태로 표시 (있을 경우)
- [x] 예문 (파란색 왼쪽 테두리, 있을 경우)
- [x] 번역 컨텍스트: 원문 + 번역 (언어 코드 표시)
- [x] 학습 현황: 복습 횟수, 마지막 복습, 숙련도(별), 저장일
- [x] 메모 입력란 (빈 textarea)
- [x] 태그 섹션 (입력란 + 추가 버튼)
- [x] 도구바가 숨겨짐

---

## Test 7: 메모 저장 기능

### 목적
- 상세 뷰에서 메모를 입력/저장하고, 재진입 시 유지되는지 확인

### 절차
1. 상세 뷰에서 메모란에 텍스트 입력 (예: "중요한 단어!")
2. **"메모 저장"** 버튼 클릭
3. 토스트 메시지 확인
4. "← 뒤로" 클릭 후 같은 카드 다시 클릭

### 확인 사항
- [x] "메모가 저장되었습니다." 토스트 표시 (약 1.5초 후 사라짐)
- [x] 재진입 시 입력한 메모가 유지됨

### 콘솔 확인
```javascript
chrome.storage.local.get('vocabulary_words', (data) => {
  const words = data.vocabulary_words || [];
  const word = words.find(w => w.userNote);
  console.log('Word with note:', word?.word, '| Note:', word?.userNote);
});
```
- [x] 해당 단어의 `userNote` 필드에 입력한 텍스트가 저장됨

---

## Test 8: 태그 추가/삭제 기능

### 목적
- 태그를 추가하고 삭제할 수 있는지 확인

### 절차
1. 상세 뷰에서 태그 입력란에 "중요" 입력
2. **"추가"** 버튼 클릭 (또는 Enter 키)
3. 태그 "TOEIC" 추가
4. "중요" 태그의 **x** 버튼 클릭하여 삭제
5. "← 뒤로" → 같은 카드 재진입

### 확인 사항
- [x] 태그 칩이 추가됨 (각 칩에 x 버튼)
- [x] Enter 키로도 태그 추가 가능
- [x] 중복 태그 입력 시 무시됨
- [x] x 클릭 시 해당 태그 제거
- [x] 재진입 시 태그 유지

### 콘솔 확인
```javascript
chrome.storage.local.get('vocabulary_words', (data) => {
  const words = data.vocabulary_words || [];
  words.forEach(w => {
    if (w.tags && w.tags.length > 0) {
      console.log(w.word, '→ tags:', w.tags);
    }
  });
});
```
- [x] 태그가 `tags` 배열에 저장됨

---

## Test 9: 단어 삭제 기능

### 목적
- 상세 뷰에서 단어를 삭제하고, 목록에서 제거되는지 확인

### 절차
1. 삭제할 단어의 상세 뷰 진입
2. **🗑️** 버튼 클릭
3. 인라인 확인 메시지 확인 (`"word" 삭제?` + 삭제/취소 버튼)
4. **"취소"** 클릭 → 삭제 버튼 복구 확인
5. 다시 **🗑️** → **"삭제"** 클릭

### 확인 사항
- [x] 🗑️ 클릭 시 `"word" 삭제?` + 삭제/취소 버튼 표시
- [x] "취소" 클릭 시 원래 🗑️ 버튼으로 복구
- [x] "삭제" 클릭 시 목록 뷰로 복귀
- [x] 삭제된 단어가 목록에서 사라짐
- [x] 상단 단어 수가 감소

### 콘솔 확인
```javascript
chrome.storage.local.get(['vocabulary_words', 'vocabulary_meta', 'vocabulary_index'], (data) => {
  console.log('Total words:', data.vocabulary_words?.length);
  console.log('Meta totalWords:', data.vocabulary_meta?.totalWords);
  console.log('Index keys:', Object.keys(data.vocabulary_index || {}));
});
```
- [x] `vocabulary_words` 배열에서 삭제된 단어 없음
- [x] `vocabulary_meta.totalWords` 감소
- [x] `vocabulary_index`에서 삭제된 단어 키 없음

---

## Test 10: 키보드 접근성

### 목적
- Esc 키로 드롭다운/상세 뷰를 닫을 수 있는지 확인

### 절차
1. "필터" 드롭다운 열기 → Esc 키
2. "정렬" 드롭다운 열기 → Esc 키
3. 단어 카드 클릭 → 상세 뷰 진입 → Esc 키

### 확인 사항
- [x] Esc로 필터 드롭다운 닫힘
- [x] Esc로 정렬 드롭다운 닫힘
- [x] Esc로 상세 뷰 닫히고 목록 뷰 복귀

---

## Test 11: 실시간 스토리지 반영

### 목적
- 구글 번역에서 새 단어 저장 시 Side Panel에 즉시 반영되는지 확인

### 절차
1. Side Panel의 "단어장" 탭을 열어둔 상태로
2. 구글 번역 페이지에서 새로운 단어 검색 → 저장
3. Side Panel 목록 확인 (탭 전환 없이)

### 확인 사항
- [x] 새 단어 카드가 목록에 자동 추가
- [x] 단어 수 카운트 갱신
- [x] 필터 드롭다운의 언어쌍/품사 목록 갱신 (새로운 언어쌍이면)

---

## Test 12: 검색 + 필터 + 정렬 조합

### 목적
- 검색, 필터, 정렬을 동시에 적용했을 때 정상 동작하는지 확인

### 절차
1. 검색바에 단어 일부 입력
2. 필터에서 특정 품사 선택
3. 정렬에서 "가나다순" 선택
4. 결과 목록 확인
5. 검색어 삭제 → 필터 "전체 품사"로 복원 → 정렬 "최신순"으로 복원

### 확인 사항
- [x] 세 조건이 동시에 적용됨
- [x] 결과 수가 "N개 / M개"로 표시
- [x] 각 조건 해제 시 점진적으로 결과 늘어남
- [x] 모든 조건 해제 시 전체 목록 복원

---

## 정리 체크리스트

| 테스트 | 결과 |
|--------|------|
| Test 1: Side Panel 초기화 | [x] |
| Test 2: 단어 목록 렌더링 | [x] |
| Test 3: 검색 기능 | [x] |
| Test 4: 필터 드롭다운 | [ ] |
| Test 5: 정렬 드롭다운 | [ ] |
| Test 6: 상세 뷰 표시 | [x] |
| Test 7: 메모 저장 | [x] |
| Test 8: 태그 추가/삭제 | [x] |
| Test 9: 단어 삭제 | [x] |
| Test 10: 키보드 접근성 | [x] |
| Test 11: 실시간 반영 | [x] |
| Test 12: 조합 테스트 | [x] |

### Stage 5-6 완료 기준
- Side Panel에서 저장된 단어 목록이 카드 형태로 표시된다.
- 검색바에서 단어/뜻 기반 실시간 필터링이 작동한다.
- 필터(언어쌍, 품사)와 정렬(최신순, 가나다순, 복습 필요 순, 오래된 순)이 동작한다.
- 카드 클릭 시 상세 뷰에서 모든 단어 정보(정의, 유의어, 예문, 컨텍스트, 학습 현황)가 표시된다.
- 메모 입력/저장, 태그 추가/삭제가 가능하다.
- 단어 삭제(확인 절차 포함)가 정상 동작한다.

### 다음 단계 (Phase 1 마무리):
- 주요 시나리오 통합 테스트 (저장 → 조회 → 수정 → 삭제)
- 크로스 브라우저 테스트 (Chrome, Edge)
- 용량 테스트 (100개 단어 저장)
